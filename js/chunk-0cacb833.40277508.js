(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cacb833"],{"07ac":function(s,t,i){var a=i("23e7"),o=i("6f53").values;a({target:"Object",stat:!0},{values:function(s){return o(s)}})},"0fa5":function(s,t,i){"use strict";i.r(t);var a=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"shopWrap"},[i("header",[i("div",{staticClass:"top"},[i("div",{staticClass:"top_img"},[i("img",{attrs:{src:s.imgurl+s.getShopMsg.image_path,alt:""}})]),i("div",{staticClass:"top_text"},[i("h4",[s._v(s._s(s.getShopMsg.name))]),i("p",[s._v("商家配送／分钟送达／配送费¥5")]),i("p",[s._v("公告：欢迎光临，用餐高峰请提前下单，谢谢")])])]),i("div",{staticClass:"lianjie"},[i("router-link",{attrs:{to:"/food"}},[i("i",{staticClass:"el-icon-arrow-left"})]),i("router-link",{attrs:{to:"/shop/shopdetail"}},[i("i",{staticClass:"el-icon-arrow-right"})])],1)]),i("div",{staticClass:"change_show_type"},[i("div",{on:{click:s.getshowgood}},[s.isShop?i("span",[s._v("商品")]):s._e(),s.isShop?s._e():i("span",{staticClass:"changecolor"},[s._v("商品")])]),i("div",{on:{click:s.getshowpj}},[s.isPingjia?i("span",[s._v("评价")]):s._e(),s.isPingjia?s._e():i("span",{staticClass:"changecolor"},[s._v("评价")])])]),s.showGoods?i("div",{staticClass:"food_container"},[i("div",{staticClass:"menu_container"},[i("div",{staticClass:"wrapper_menu"},[i("ul",s._l(s.shoplists,(function(t,a){return i("li",{key:t.id,class:s.number==a?"activity_menu":"",on:{click:function(t){return s.getShoplist(a)}}},[i("span",[s._v(s._s(t.name))])])})),0)]),i("div",{staticClass:"menu_right"},s._l(s.shoplists,(function(t){return i("div",{staticClass:"menu_detail_list"},[i("div",{staticClass:"menu_right_title"},[i("div",[i("h2",[s._v(s._s(t.name))]),i("span",[s._v(s._s(t.description))])]),i("span",[s._v("···")])]),s._l(t.foods,(function(t){return i("section",[i("div",{staticClass:"menu_detail_link"},[i("div",{staticClass:"detail_left"},[i("img",{attrs:{src:s.imgurl+t.image_path,alt:""}})]),i("div",{staticClass:"detail_right"},[i("h3",[i("strong",[s._v(s._s(t.name))]),i("span",[s._v("招牌")])]),i("p",{staticClass:"text1"},[s._v(s._s(t.description))]),i("p",{staticClass:"text2"},[i("span",[s._v("月售"+s._s(t.month_sales)+"份")]),i("span",[s._v("好评率"+s._s(t.satisfy_rate)+"%")])]),s._m(0,!0)])]),i("div",{staticClass:"footer"},[i("div",{staticClass:"footer_left"},[i("span",{staticClass:"p_one"},[s._v("￥")]),i("span",{staticClass:"p_two"},[s._v(s._s(t.specfoods[0].price))]),i("span",{staticClass:"p_three"},[s._v("起")])]),i("div",{staticClass:"cart_module"},[(t.specifications.length?s.showAddNum:!s.showAddNum)?i("div",{staticClass:"add_car_num"},[s.foodNum(t)?i("span",{staticClass:"jianhao",on:{click:s.xggjianshao}},[i("i",{staticClass:"el-icon-remove"})]):s._e(),s.foodNum(t)?i("span",{staticClass:"count"},[s._v(s._s(s.foodNum(t)))]):s._e(),i("span",{staticClass:"jiahao",attrs:{id:"xgg"},on:{click:function(i){return s.xuanguige(t.specfoods,t.category_id)}}},[s._v("选规格")])]):s._e(),(t.specifications.length?!s.showAddNum:s.showAddNum)?i("div",{staticClass:"add_car_num"},[s.foodNum(t)?i("span",{staticClass:"jianhao",on:{click:function(i){s.jianshao(s.foodNum(t),t.category_id,t.item_id,t.specfoods[0].food_id,t.specfoods[0].name,t.specfoods[0].price,t.specfoods[0].specs,t.specfoods[0].packing_fee,t.specfoods[0].sku_id,t.specfoods[0].stock)}}},[i("i",{staticClass:"el-icon-remove"})]):s._e(),s.foodNum(t)?i("span",{staticClass:"count"},[s._v(s._s(s.foodNum(t)))]):s._e(),i("span",{staticClass:"jiahao",on:{click:function(i){return s.tianjia(t.category_id,t.item_id,t.specfoods[0].food_id,t.specfoods[0].name,t.specfoods[0].price,t.specfoods[0].specs,t.specfoods[0].packing_fee,t.specfoods[0].sku_id,t.specfoods[0].stock)}}},[i("i",{staticClass:"el-icon-circle-plus"})])]):s._e()])])])}))],2)})),0)]),i("div",{staticClass:"buy_cart_container"},[i("div",[i("div",{staticClass:"cart_icon_container",style:s.allFoodsPrice?"background-color:#3190e8":"",attrs:{id:"shop_car"},on:{click:s.showCar}},[i("i",{staticClass:"el-icon-shopping-cart-2"}),s.allFoodsPrice?i("span",{attrs:{id:"cart_list_length"}},[s._v(s._s(s.allItemCount))]):s._e()]),i("div",{staticClass:"cart_num"},[i("div",{staticClass:"pricecount"},[s._v("￥"+s._s(s.allFoodsPrice))]),i("div",[s._v("配送费¥5")])]),i("div",{staticClass:"gotopay",style:s.allFoodsPrice?"background-color :#4cd964":"",attrs:{id:"go_pay"},on:{click:s.goDist}},[i("span",{attrs:{id:"paysum"},on:{click:s.goDist}},[s._v(s._s(s.allFoodsPrice?"去下单":"还差¥20起送"))])])])])]):s._e(),s.isPingjia?s._e():i("div",{staticClass:"rating_container"},[s._m(1)]),s.isPingjia?s._e():i("div",{staticClass:"pingjia"},[i("ul",s._l(s.pingjialists,(function(t){return i("li",[s._v(s._s(t.name)+"("+s._s(t.count)+")")])})),0)]),s._l(s.pingjiatext,(function(t){return s.isPingjia?s._e():i("div",{staticClass:"jpcontent"},[i("ul",[i("li",[i("img",{attrs:{src:"https://elm.cangdu.org/img/default.jpg",alt:""}}),i("div",{staticClass:"contents"},[i("div",{staticClass:"con_top"},[i("p",[i("span",[s._v(s._s(t.username))]),i("span",[s._v(s._s(t.rated_at))])]),i("p",[s._m(2,!0),i("span",[s._v(s._s(t.time_spent_desc))])])]),i("div",{staticClass:"nav_lis"},[i("ul",[i("li",s._l(t.item_ratings,(function(s){return i("img",{staticStyle:{float:"left"},attrs:{src:"https://fuss10.elemecdn.com/"+s.image_hash,alt:""}})})),0)])]),i("div",{staticClass:"nav_block"},[i("ul",s._l(t.item_ratings,(function(t){return i("li",{staticClass:"ellipsis"},[s._v(s._s(t.food_name))])})),0)])])])])])})),s.showxgg?i("div",{staticClass:"specs_cover"}):s._e(),s.showxgg?i("div",{staticClass:"specs_list"},[i("div",{staticClass:"specs_list_header"},[i("h4",[s._v(s._s(s.xuanguigeName))]),i("i",{staticClass:"el-icon-close",on:{click:s.closethis}})]),i("div",{staticClass:"specs_details"},[i("h5",[s._v("规格")]),i("ul",s._l(s.xuanguigeArr,(function(t,a){return i("li",{key:a,style:s.guigebgc==a?"color:blue;":"",on:{click:function(t){return s.guigeID(a)}}},[s._v(s._s(t.specs[0].value))])})),0)]),i("div",{staticClass:"specs_footer"},[i("div",{staticClass:"specs_left"},[i("span",[s._v("￥")]),i("span",[s._v(s._s(s.guigeArr.price))])]),i("div",{staticClass:"specs_right",on:{click:function(t){return s.putCar(s.xuanguigecId,s.xuanguigeArr[s.guigebgc].item_id,s.xuanguigeArr[s.guigebgc].food_id,s.xuanguigeName,s.guigeArr.price,s.xuanguigeArr[s.guigebgc].specs[0].value,s.xuanguigeArr[s.guigebgc].packing_fee,s.xuanguigeArr[s.guigebgc].sku_id,s.xuanguigeArr[s.guigebgc].stock)}}},[s._v("加入购物车")])])]):s._e(),i("el-collapse-transition",[s.showBuyCart?i("div",{staticClass:"cart_food_list"},[i("div",{staticClass:"cart_food_list_header"},[i("h4",[s._v("购物车")]),i("div",[i("i",{staticClass:"el-icon-delete"}),i("span",{on:{click:s.clearAll}},[s._v("清空")])])]),i("div",{staticClass:"cart_food_details"},[i("ul",s._l(s.carArr,(function(t,a){return i("li",{key:a},[i("div",{staticClass:"cart_list_num"},[i("p",{staticClass:"ellipsis"},[s._v(s._s(t.name))]),i("p",{staticClass:"ellipsis",staticStyle:{"font-size":".5rem"}},[s._v(s._s(""==t.specs?"":t.specs))])]),i("div",{staticClass:"cart_list_price"},[i("span",[s._v("￥")]),i("span",[s._v(s._s(t.price))])]),i("div",{staticClass:"add_car_num",staticStyle:{display:"block"}},[i("span",{on:{click:function(i){return s.jianshao1(t.shopId,t.category_id,t.item_id,t.food_id,t.name,t.price,t.specs,t.packing_fee,t.sku_id,t.stock)}}},[i("i",{staticClass:"el-icon-remove"})]),i("span",[s._v(s._s(t.num))]),i("span",{on:{click:function(i){return s.tianjia1(t.shopId,t.category_id,t.item_id,t.food_id,t.name,t.price,t.specs,t.packing_fee,t.sku_id,t.stock)}}},[i("i",{staticClass:"el-icon-circle-plus"})])])])})),0)])]):s._e()])],2)},o=[function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("p",{staticClass:"text3"},[i("span",[s._v("打威群岛")])])},function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",[i("div",{staticClass:"rating_header"},[i("div",{staticClass:"rating_header_left"},[i("p",{staticClass:"t1"},[s._v("5")]),i("p",{staticClass:"t2"},[s._v("综合评价")]),i("p",{staticClass:"t3"},[s._v("高于周边商家76.9%")])]),i("div",{staticClass:"rating_header_right"},[i("p",{staticClass:"p1"},[i("span",[s._v("服务态度")]),i("span",{staticClass:"stars"},[i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"})]),i("span",{staticClass:"yellow_t"},[s._v("4.7")])]),i("p",{staticClass:"p2"},[i("span",[s._v("菜品评价")]),i("span",{staticClass:"stars"},[i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"})]),i("span",{staticClass:"yellow_t"},[s._v("4.7")])]),i("p",{staticClass:"p3"},[i("span",[s._v("送达时间")]),i("span",{staticClass:"stars"},[i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"})]),i("span",{staticClass:"yellow_t"},[s._v("4.7")])])])])])},function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("span",[i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"}),i("i",{staticClass:"el-icon-star-on"})])}],e=(i("4160"),i("b0c0"),i("b64b"),i("07ac"),i("159b"),i("5530")),c=i("2f62"),n={name:"Shop",data:function(){return{showGoods:!0,showPingjia:!1,imgurl:"https://elm.cangdu.org/img/",getShopMsg:[],getShopId:[],shoplists:[],shopArr:[],shopName:"",pingjialists:[],pingjiascore:[],pingjiatext:[],shopDescription:"",number:0,showAddNum:!0,shopcount:0,shopSum:0,danpinsum:0,isShop:!1,isPingjia:!0,showxgg:!1,c_sum:0,c_num:0,cart_list:[],showBuyCart:!1,newArr:[],leftArr:[],leftNum:0,countNum:0,xggprice:0,xg_num:void 0,leftlength:[],carArr:[],shopCarts:null,xuanguigeArr:[],guigeArr:[],guigebgc:90,xuanguigeName:"",xuanguigecId:"",shopId:""}},created:function(){var s=this;this.number=localStorage.getItem("shopindex")-0,this.shopName=localStorage.getItem("shopname"),this.shopDescription=localStorage.getItem("shopdes"),this.getShopMsg=JSON.parse(localStorage.getItem("shopId")),this.shopId=this.getShopMsg.id,this.axios.get("/shopping/v2/menu",{params:{restaurant_id:this.getShopMsg.id}}).then((function(t){s.shoplists=t,console.log("123123123",s.shoplists)})).catch((function(s){})),this.axios.get("/ugc/v2/restaurants/"+this.getShopMsg.id+"/ratings/tags").then((function(t){s.pingjialists=t})).catch((function(s){})),this.axios.get("/ugc/v2/restaurants/"+this.getShopMsg.id+"/ratings/scores").then((function(t){s.pingjiascore=t})).catch((function(s){})),this.axios.get("/ugc/v2/restaurants/"+this.getShopMsg.id+"/ratings").then((function(t){s.pingjiatext=t,console.log(t)})).catch((function(s){})),this.$store.commit("init_buy_cart"),this.handleCartData()},watch:{shopCart:{handler:function(s,t){console.log("shopCarts改变"),this.handleCartData()},deep:!0}},methods:{handleCartData:function(){var s=this;this.carArr=[],this.shopCarts=this.$store.state.cartList,console.log(this.shopCarts),Object.keys(this.shopCarts).forEach((function(t){console.log(s.shopCarts[t]),Object.keys(s.shopCarts[t]).forEach((function(i){Object.keys(s.shopCarts[t][i]).forEach((function(a){Object.keys(s.shopCarts[t][i][a]).forEach((function(o){var c=s.shopCarts[t][i][a][o],n=Object(e["a"])({},c,{category_id:i,item_id:a,food_id:o,shopId:t});n.shopId==s.shopId&&s.carArr.push(n)}))}))}))}))},tianjia:function(s,t,i,a,o,e,c,n,r){this.$store.commit("add_cart",{shopid:this.shopId,category_id:s,item_id:t,food_id:i,name:a,price:o,specs:e,packing_fee:c,sku_id:n,stock:r})},jianshao:function(s,t,i,a,o,e,c,n,r,l){this.$store.commit("reduce_cart",{shopid:this.shopId,category_id:t,item_id:i,food_id:a,name:o,price:e,specs:c,packing_fee:n,sku_id:r,stock:l})},putCar:function(s,t,i,a,o,e,c,n,r){console.log(s,t,i,a,o,e,c,n,r),this.$store.commit("add_cart",{shopid:this.shopId,category_id:s,item_id:t,food_id:i,name:a,price:o,specs:e,packing_fee:c,sku_id:n,stock:r}),this.showxgg=!this.showxgg},tianjia1:function(s,t,i,a,o,e,c,n,r,l){this.$store.commit("add_cart",{shopid:s,category_id:t,item_id:i,food_id:a,name:o,price:e,specs:c,packing_fee:n,sku_id:r,stock:l})},jianshao1:function(s,t,i,a,o,e,c,n,r,l){this.$store.commit("reduce_cart",{shopid:s,category_id:t,item_id:i,food_id:a,name:o,price:e,specs:c,packing_fee:n,sku_id:r,stock:l})},showCar:function(){this.showBuyCart=!this.showBuyCart},clearAll:function(){this.$store.commit("delete_cart",{shopid:this.shopId}),this.showBuyCart=!this.showBuyCart},xuanguige:function(s,t){this.showxgg=!this.showxgg,this.xuanguigeArr=s,this.xuanguigeName=s[0].name,this.xuanguigecId=t},closethis:function(){this.showxgg=!this.showxgg},guigeID:function(s){this.guigeArr=this.xuanguigeArr[s],this.guigebgc=s},xggjianshao:function(){alert("请去购物车列表操作")},goDist:function(){this.$router.push("/confirmorder"),localStorage.setItem("allprice",this.allFoodsPrice)},getShoplist:function(s){var t=".menu_detail_list:nth-of-type("+(s+1)+")";console.log(this.$el.querySelector(t)),this.$el.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"}),this.number=s,localStorage.setItem("shopindex",s),localStorage.setItem("foodlist",JSON.stringify(this.shoplists[s].foods))},getshowgood:function(){this.isShop=!this.isShop,0==this.isPingjia&&(this.isPingjia=!0),this.showGoods=!0},getshowpj:function(){this.isPingjia=!this.isPingjia,0==this.isShop&&(this.isShop=!0),this.showGoods=!1}},computed:Object(e["a"])({allFoodsPrice:function(){var s=this,t=0;return this.shopCarts&&Object.keys(this.shopCarts).forEach((function(i){Object.keys(s.shopCarts[i]).forEach((function(a){Object.keys(s.shopCarts[i][a]).forEach((function(o){Object.keys(s.shopCarts[i][a][o]).forEach((function(c){var n=s.shopCarts[i][a][o][c],r=Object(e["a"])({},n,{category_id:a,item_id:o,food_id:c,shopId:i});r.shopId==s.shopId&&(t+=r.num*r.price)}))}))}))})),t},allItemCount:function(){var s=this,t=0;return this.shopCarts&&Object.keys(this.shopCarts).forEach((function(i){Object.keys(s.shopCarts[i]).forEach((function(a){Object.keys(s.shopCarts[i][a]).forEach((function(o){Object.keys(s.shopCarts[i][a][o]).forEach((function(c){var n=s.shopCarts[i][a][o][c],r=Object(e["a"])({},n,{category_id:a,item_id:o,food_id:c,shopId:i});r.shopId==s.shopId&&(t+=r.num)}))}))}))})),t},iCount:function(){return function(s){}},itemCount:function(){var s=this;return function(t){var i=0;return s.shopCart&&s.shopCart[t]&&Object.values(s.shopCart[t]).forEach((function(s){Object.values(s).forEach((function(s){i+=s.num}))})),i}}},Object(c["b"])(["cartList"]),{shopCart:function(){return Object.assign({},this.$store.state.cartList[this.shopId])},foodNum:function(){var s=this;return function(t){var i,a=t.category_id,o=t.item_id;if(s.shopCart&&s.shopCart[a]&&s.shopCart[a][o]){return Object.values(s.shopCart[a][o]).forEach((function(s,t){i=s?s.num:0,i})),i}return 0}}})},r=n,l=(i("72c1"),i("2877")),h=Object(l["a"])(r,a,o,!1,null,"56ad2ecc",null);t["default"]=h.exports},"6f53":function(s,t,i){var a=i("83ab"),o=i("df75"),e=i("fc6a"),c=i("d1e7").f,n=function(s){return function(t){var i,n=e(t),r=o(n),l=r.length,h=0,u=[];while(l>h)i=r[h++],a&&!c.call(n,i)||u.push(s?[i,n[i]]:n[i]);return u}};s.exports={entries:n(!0),values:n(!1)}},"72c1":function(s,t,i){"use strict";var a=i("8b8f"),o=i.n(a);o.a},"8b8f":function(s,t,i){}}]);
//# sourceMappingURL=chunk-0cacb833.40277508.js.map