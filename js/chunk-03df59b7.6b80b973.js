(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03df59b7"],{"3b50":function(s,t,a){"use strict";var e=a("a588"),i=a.n(e);i.a},8873:function(s,t,a){"use strict";a.r(t);var e=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"confirmWrap"},[a("header",[a("router-link",{attrs:{to:"/msite"}},[a("i",{staticClass:"el-icon-arrow-left"})]),s._m(0),a("router-link",{attrs:{to:"/confirmorder"}},[a("i",{staticClass:"el-icon-s-custom"})])],1),a("router-link",{attrs:{to:""}},[a("div",{staticClass:"address_empty_left"},[a("div",[a("i",{staticClass:"el-icon-location-outline"})]),a("div",{staticClass:"address_detail_container"},[a("div",{staticClass:"top"},[a("span",[s._v(s._s(s.name))]),a("span",[s._v("先生")]),a("span",[s._v(s._s(s.phone))])]),a("div",{staticClass:"address_detail"},[a("span",[s._v("公司")]),a("p",[s._v(s._s(s.address))])])])]),a("div",{staticClass:"address_empty_right"},[a("i",{staticClass:"el-icon-arrow-right",on:{click:s.gochooseaddress}})])]),a("div",{staticClass:"delivery_model container_style"},[a("p",[s._v("送达时间")]),a("div",{staticClass:"deliver_time"},[a("p",[s._v("尽快送达 | 预计 "+s._s(s.distObj.delivery_reach_time))]),a("p",[s._v("蜂鸟专送")])])]),s._m(1),a("div",{staticClass:"food_list"},[a("div",{staticClass:"food_list1"},[a("img",{attrs:{src:"",alt:""}}),a("span",[s._v(s._s(s.shopName))])]),a("ul",s._l(s.carArr,(function(t){return a("li",{key:t.name},[a("p",[s._v(s._s(t.name)+s._s(""==t.specs?"":"-"+t.specs))]),a("div",[a("span",[s._v("x"+s._s(t.num))]),a("span",[s._v("¥"+s._s(t.price))])])])})),0),a("div",{staticClass:"food_list3"},[a("p",[s._v("餐盒")]),a("div",[a("span"),a("span",[s._v("￥"+s._s(s.canhe))])])]),a("div",{staticClass:"food_list3"},[a("p",[s._v("配送费")]),a("div",[a("span"),a("span",[s._v("￥"+s._s(s.peisong))])])]),a("div",{staticClass:"food_list3"},[a("p",[s._v("订单￥"+s._s(s.peisong+s.canhe+ +s.allPrice))]),a("div",[a("span",[s._v("待付款￥"+s._s(s.peisong+s.canhe+ +s.allPrice))])])])]),s._m(2),a("div",{staticClass:"confrim_order"},[a("p",[s._v("待支付 ¥"+s._s(s.peisong+s.canhe+ +s.allPrice))]),a("p",{on:{click:s.gopayment}},[s._v("确认下单")])])],1)},i=[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"top_title"},[a("span",[s._v("确认订单")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"pay_way container_style"},[a("div",{staticClass:"up"},[a("span",[s._v("支付方式")]),a("div",[a("span",[s._v("在线支付")]),a("i",{staticClass:"el-icon-arrow-right"})])]),a("div",{staticClass:"down"},[a("span",[s._v("红包")]),a("span",[s._v("暂时只在饿了么 APP 中支持")])])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"pay_way container_style listthree"},[a("div",{staticClass:"up"},[a("span",[s._v("订单备注")]),a("div",[a("span",[s._v("口味、偏好等")]),a("i",{staticClass:"el-icon-arrow-right"})])]),a("div",{staticClass:"up"},[a("span",[s._v("发票抬头")]),a("div",[a("span",[s._v("不需要开发票")]),a("i",{staticClass:"el-icon-arrow-right"})])])])}],r=(a("4de4"),a("4160"),a("b0c0"),a("b64b"),a("159b"),a("5530")),o=(a("2f62"),{name:"ConfirmOrder",data:function(){return{username:"",placeNameHistory:"",geohash:"",shopMsg:[],shopId:"",carArr:[],shopCarts:null,shopName:"",entities:[],distObj:{},thisAddress:0,addressMsg:"",isShow:!1,canhe:"",peisong:"",allPrice:"",zongjia:"",userid:"",name:"",phone:"",address:"",addresslist:[]}},created:function(){var s=this;this.allPrice=localStorage.getItem("allprice"),this.thisAddress=0,this.thisAddress=localStorage.getItem("thisAddress"),this.shopMsg=JSON.parse(localStorage.getItem("shopId")),this.shopName=this.shopMsg.name,this.shopId=this.shopMsg.id,this.userid=localStorage.getItem("userId"),this.addresslist=JSON.parse(localStorage.getItem("addresslist")),console.log(this.addresslist),this.axios.get("/v1/users/"+this.userid+"/addresses",{params:{user_id:this.userid}}).then((function(t){console.log(t),s.addressMsg=t,s.name=s.addressMsg[s.thisAddress].name,s.phone=s.addressMsg[s.thisAddress].phone,s.address=s.addressMsg[s.thisAddress].address})).catch((function(s){})),this.username=localStorage.getItem("usermsg"),this.placeNameHistory=localStorage.getItem("placeNameHistory");var t=JSON.parse(localStorage.getItem("placeHistory")),a=t.filter((function(t){return t.name==s.placeNameHistory}));this.geohash=a[0].geohash,this.$store.commit("init_buy_cart"),this.carArr=[],this.shopCarts=this.$store.state.cartList,Object.keys(this.shopCarts).forEach((function(t){Object.keys(s.shopCarts[t]).forEach((function(a){Object.keys(s.shopCarts[t][a]).forEach((function(e){Object.keys(s.shopCarts[t][a][e]).forEach((function(i){var o=s.shopCarts[t][a][e][i],c=Object(r["a"])({},o,{category_id:a,item_id:e,food_id:i,shopId:t});c.shopId==s.shopId&&s.carArr.push(c)}))}))}))}));for(var e=0;e<this.carArr.length;e++){var i=[{attrs:[],extra:{},id:this.carArr[e].id,name:this.carArr[e].name,price:this.carArr[e].price,packing_fee:this.carArr[e].packing_fee,quantity:this.carArr[e].num,sku_id:this.carArr[e].sku_id,specs:this.carArr[e].specs,stock:this.carArr[e].stock}];this.entities.push(i)}this.axios.post("/v1/carts/checkout",{restaurant_id:this.shopId,geohash:this.geohash,entities:this.entities}).then((function(t){console.log(t),s.distObj=t,s.canhe=t.cart.extra[0].price,s.peisong=t.cart.deliver_amount,localStorage.setItem("cartid",t.id)})).catch((function(s){}))},methods:{gopayment:function(){this.$router.push("/confirmorder/payment")},gochooseaddress:function(){this.$router.push("/chooseaddress")}}}),c=o,n=(a("3b50"),a("2877")),d=Object(n["a"])(c,e,i,!1,null,"ed1f0fe0",null);t["default"]=d.exports},a588:function(s,t,a){}}]);
//# sourceMappingURL=chunk-03df59b7.6b80b973.js.map